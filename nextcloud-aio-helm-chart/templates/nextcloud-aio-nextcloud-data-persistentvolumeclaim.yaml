apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    io.kompose.service: nextcloud-aio-nextcloud-data
  name: nextcloud-aio-nextcloud-data
  namespace: "{{ .Values.NAMESPACE }}"
spec:
  {{- if .Values.STORAGE_CLASS_DATA }}
  storageClassName: {{ .Values.STORAGE_CLASS_DATA }}
  {{- else if .Values.STORAGE_CLASS }}
  storageClassName: {{ .Values.STORAGE_CLASS }}
  {{- end }}
  {{- if .Values.STORAGE_RECLAIM_POLICY }}
  persistentVolumeReclaimPolicy: {{ .Values.STORAGE_RECLAIM_POLICY }}
  {{- end }}
  {{- if .Values.STORAGE_LOCAL_BASE_PATH }}
  local:
    path: {{ .Values.STORAGE_LOCAL_BASE_PATH }}/nextcloud-aio-nextcloud-data
  {{- end }}
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: {{ .Values.NEXTCLOUD_DATA_STORAGE_SIZE }}
